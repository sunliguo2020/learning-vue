"use strict";const e=require("../../common/vendor.js"),a=require("../../api/apis.js");if(require("../../utils/request.js"),!Array){e.resolveComponent("uni-load-more")()}Math;const l={__name:"classlist",setup(l){const t=e.ref(!1),s=e.ref([]),o={pageNum:1,pageSize:12};e.onLoad((a=>{let{id:l=null,name:t=null,type:s=null}=a;s&&(o.type=s),l&&(o.classid=l),e.index.setNavigationBarTitle({title:t}),i()})),e.onReachBottom((()=>{o.pageNum++,t.value||i()}));const i=async()=>{let l;o.classid&&(console.log("获取分类的信息"),l=await a.apiGetClassList(o)),o.type&&(console.log("我的下载 我的评分"),l=await a.apiGetHistoryList(o)),console.log(l),console.log("新获取的数据：",l.data),s.value=[...s.value,...l.data],o.pageSize>l.data.length&&(t.value=!0),console.log("准备将数据保存到缓存中：",s.value),e.index.setStorageSync("storageClissList",s.value)};return(a,l)=>e.e({a:!s.value&&!t.value},s.value||t.value?{}:{b:e.p({status:"loading"})},{c:e.f(s.value,((e,a,l)=>({a:e.smallPicurl,b:"/pages/preview/preview?id="+e._id,c:e._id}))),d:s.value||t.value},s.value||t.value?{e:e.p({status:t.value?"noMore":"loading"})}:{})}},t=e._export_sfc(l,[["__scopeId","data-v-af5b270e"]]);wx.createPage(t);
